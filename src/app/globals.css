@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}


@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/* A4 print helpers */
.a4 {
  width: 210mm;
  min-height: 297mm;
  box-sizing: border-box;
}

/* Only apply height/overflow constraints in print mode */
@media print {
  .a4 {
    width: 210mm !important;
    min-height: 297mm !important;
    overflow: visible !important;
    position: relative;
  }
}

/* Print-specific layout fixes */
@media print {
  * {
    box-sizing: border-box !important;
  }

  /* Fix positioning issues */
  .absolute {
    position: absolute !important;
  }

  .relative {
    position: relative !important;
  }

  /* Ensure proper spacing */
  .rirekisho {
    position: relative !important;
  }
}

.page-break {
  page-break-after: always;
}

/* Prevent a block from being split across pages */
.avoid-break {
  break-inside: avoid;
  page-break-inside: avoid;
  -webkit-region-break-inside: avoid;
}

/* Display-only cell content (export/print). Keep generic block so regular fields stay left-aligned. */
.cell-display {
  display: flex;
  align-items: center;
  width: 100%;
  height: 100%;
}

/* Strong vertical centering for the 氏名 (name) row value cell */
.rirekisho tr.r-row-name>td.cell .cell-display {
  justify-content: center;
  line-height: 1;
}

@media print {
  .rirekisho tr.r-row-name>td.cell .cell-display {
    justify-content: center !important;
    line-height: 1 !important;
  }

  /* Also center フリガナ value horizontally in PDF */
  .rirekisho tr.r-row-name-furigana>td.cell .cell-display {
    justify-content: center !important;
  }

  /* Bump print font size for 氏名 value cell only (keep フリガナ small) */
  .rirekisho tr.r-row-name>td.cell {
    font-size: 14pt !important;
  }

  /* Make 性別 text smaller in PDF - target last column cells */
  .rirekisho tr.r-row-name-furigana th:last-child,
  .rirekisho tr.r-row-name td:last-child {
    font-size: 10pt !important;
  }
}

/* Inline display fix: when an EditableCell must behave inline inside a flex row
   (e.g., Day and Age fields in the DOB row), use className="inline-cell" */
.inline-cell.cell-display {
  display: inline-block;
  width: auto;
  min-width: 0;
  padding: 0.2mm 0.6mm;
  border: 0.2mm dotted #777;
  border-radius: 0;
  text-align: center;
}

/* Multiline display cells should start at the top */
td.cell.cell-wrap .cell-display {
  align-items: flex-start;
}

/* Prevent line breaks for CJK text segments such as "日生（満 xx 歳）" */
.no-break-ja {
  /* keep on a single line without allowing CJK breaks */
  white-space: nowrap;
  word-break: keep-all;
  overflow-wrap: normal;
  line-height: 1;
  /* make sure content never escapes the cell */
  max-width: 100%;
  overflow: hidden;
  text-overflow: clip;
}

/* Header date inputs when in display mode: center text and show dotted border like inputs */
.rirekisho .r-header-compact .cell-display {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.2mm 0.6mm;
  border: 0.2mm dotted #777;
  border-radius: 0;
}

.print-surface {
  background: #eee;
  padding: 8px;
}

/* Rirekisho specific styles */
.rirekisho {
  font-size: 11pt;
  line-height: 1.35;
  color: #111;
}

/* Slightly larger text on second page by request */
.rirekisho.second-page {
  font-size: 11.5pt;
}

@media print {
  .rirekisho.second-page {
    font-size: 11.5pt !important;
  }
}

.rirekisho table {
  border-collapse: collapse;
  width: 100%;
  table-layout: fixed;
}

.r-title {
  font-size: 22pt;
  letter-spacing: 10px;
  /* spread like "履 歴 書" */
  font-weight: 700;
}

.rirekisho .cell {
  border: 0.5pt solid #000;
  /* solid black borders like the reference */
  padding: 1.6mm 2mm;
  vertical-align: middle;
  white-space: nowrap;
  /* default: single line for inputs */
  overflow: visible;
  font-size: 10pt;
  box-sizing: border-box;
  line-height: 1.25;
  /* Tighter line height */
}

/* Allow wrapped multi-line content (used in display mode so long sentences stay inside the cell) */
.rirekisho .cell-wrap {
  white-space: normal !important;
  word-break: break-word;
  /* generic */
  overflow-wrap: anywhere;
  /* modern */
  line-break: strict;
  /* Japanese */
}

/* When displaying (non-editable) long work history / education lines, keep vertical alignment at top */
.rirekisho td.cell.cell-wrap {
  vertical-align: top;
}

/* Standard baseline heights (min-height so they can grow but keep layout stable) */
.rirekisho .h-section-small {
  min-height: 30mm;
}

.rirekisho .h-section-medium {
  min-height: 42mm;
}

.rirekisho .h-section-large {
  min-height: 48mm;
}

.rirekisho .h-section-request {
  min-height: 35mm;
}

.cell-input {
  border: none;
  padding: 0.5mm 1mm;
  vertical-align: middle;
  background: transparent;
  font-size: inherit;
  font-family: inherit;
  width: 100%;
  outline: none;
  white-space: nowrap;
  text-align: left;
  color: #111;
  min-height: 10pt;
  box-sizing: border-box;
}

/* Override text alignment when text-center class is applied */
.cell-input.text-center {
  text-align: center;
}

/* Center alignment for display mode (PDF export) */
.text-center {
  text-align: center !important;
}

/* Right alignment for display mode (PDF export) */
.text-right {
  text-align: right !important;
}

.cell-input:focus {
  background: #f8fafc;
  border: 1px solid #2563eb;
  border-radius: 1px;
}

/* Compact inputs used in the header date area */
.rirekisho .r-header-compact .cell-input {
  padding: 0.2mm 0.6mm;
  text-align: center;
  border: 0.2mm dotted #777;
  background: transparent;
  border-radius: 0;
}

/* Inline input for age field */
.inline-block .cell-input {
  width: 10mm;
  display: inline-block;
  padding: 0.2mm 0.3mm;
  font-size: 9pt;
}

.cell-input::placeholder {
  color: transparent;
  opacity: 0;
}

.cell-textarea {
  border: 0.2mm dotted #555;
  padding: 1.5mm 2mm;
  background: transparent;
  font-size: inherit;
  font-family: inherit;
  width: 100%;
  height: 60mm;
  outline: none;
  resize: none;
  white-space: pre-wrap;
}

.cell-textarea:focus {
  border-color: #2563eb;
  background: #f8fafc;
}

.rirekisho .label {
  background: #f8f8f8;
  font-weight: 500;
  text-align: center;
  font-size: 9pt;
}

.photo-slot {
  width: 30mm;
  /* 横 30mm */
  height: 40mm;
  /* 縦 40mm (standard rirekisho size) */
  border: 0.5pt solid #000;
  display: grid;
  place-items: center;
  background: #fff;
}

.photo-slot .placeholder {
  width: 100%;
  height: 100%;
  background: #555;
  color: #fff;
  display: grid;
  place-items: center;
  text-align: center;
  font-size: 9pt;
}

/* Row height helpers to mimic the form proportions */
.r-row-sm {
  height: 10mm;
}

.r-row-md {
  height: 12mm;
}

.r-row-lg {
  height: 15mm;
}

/* Specific taller rows by request */
.r-row-name-furigana {
  height: 10mm;
}

.r-row-name {
  height: 12mm;
}

.r-row-address-furigana {
  height: 12mm;
}

.r-row-address {
  height: 18mm;
}

@media print {
  .r-row-name-furigana {
    height: 22mm !important;
  }

  .r-row-name {
    height: 22mm !important;
  }

  .r-row-address-furigana {
    height: 12mm !important;
  }

  .r-row-address {
    height: 26mm !important;
  }

  /* Enforce heights on cells too so tables respect row heights in PDF */
  tr.r-row-name-furigana>th.cell,
  tr.r-row-name-furigana>td.cell {
    height: 10mm !important;
  }

  tr.r-row-name>th.cell,
  tr.r-row-name>td.cell {
    height: 18mm !important;
  }

  tr.r-row-address-furigana>th.cell,
  tr.r-row-address-furigana>td.cell {
    height: 10mm !important;
  }

  tr.r-row-address>th.cell,
  tr.r-row-address>td.cell {
    height: 22mm !important;
  }
}

/* Visually extend an input 30mm to the right of its cell (overlays, does not move borders) */
.extend-right-30 {
  position: relative;
}

.extend-right-30 .cell-input {
  width: calc(100% + 30mm);
}

@media print {
  @page {
    size: A4;
    margin: 12mm;
  }

  body {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
    margin: 0;
    padding: 0;
    line-height: 1.3;
  }

  .print-surface {
    background: transparent;
    padding: 0;
    margin: 0;
  }

  .cell-input {
    border: 0.2mm dotted #555 !important;
    background: transparent !important;
  }

  /* Fix page sizing and prevent overlap */
  .a4 {
    width: 210mm !important;
    min-height: 297mm !important;
    overflow: visible !important;
    page-break-after: auto;
    position: relative;
    box-sizing: border-box;
    padding: 8mm 10mm !important;
  }

  /* Only break after last page */
  .a4:last-child {
    page-break-after: avoid !important;
  }

  /* Ensure proper page breaks only where needed */
  .page-break {
    page-break-after: always !important;
    break-after: page !important;
    height: 1mm !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Allow the final table on page 2 to expand to consume remaining height in print/PDF */
  section.second-page {
    display: flex !important;
    flex-direction: column !important;
  }

  section.second-page .personal-requests-table {
    height: 100% !important;
    flex: 1 1 auto !important;
  }

  section.second-page .personal-requests-td {
    height: 100% !important;
    vertical-align: top !important;
  }

  /* Photo positioning - absolute within first page only */
  section.first-page .photo-slot {
    position: absolute !important;
    right: 0mm !important;
    top: -11.5mm !important;
    z-index: 10 !important;
    width: 30mm !important;
    height: 40mm !important;
    clip-path: inset(0 0 0 0) !important;
    page-break-inside: avoid !important;
  }

  /* Completely remove photo from all printing contexts except first page */
  @media print {

    /* Restrict photo to first 297mm (A4 height) only */
    section.first-page .photo-slot {
      max-height: 40mm !important;
      clip: rect(0, 30mm, 40mm, 0) !important;
    }

    /* After first section, ensure no photo elements render */
    section:nth-of-type(2) .photo-slot,
    section:nth-of-type(n+2) .photo-slot {
      display: none !important;
      visibility: hidden !important;
    }
  }

  /* Ensure content doesn't overlap with photo */
  .rirekisho div[class*="pr-[34mm]"] {
    padding-right: 36mm !important;
  }

  /* Prevent content overflow */
  .rirekisho table {
    margin-top: 2mm !important;
    margin-bottom: 2mm !important;
    table-layout: fixed !important;
    width: 100% !important;
  }

  /* More spacious cell spacing */
  .rirekisho .cell {
    padding: 1.5mm 2mm !important;
    font-size: 10pt !important;
    line-height: 1.3 !important;
    overflow: visible !important;
    word-wrap: break-word !important;
  }

  /* Generous row heights */
  .rirekisho tbody tr {
    height: auto !important;
    min-height: 8mm !important;
  }

  /* Larger title size */
  .rirekisho .r-title {
    font-size: 22pt !important;
    letter-spacing: 10px !important;
    margin-bottom: 4mm !important;
  }

  /* More generous section margins */
  .rirekisho>div {
    margin-top: 3mm !important;
    margin-bottom: 2mm !important;
  }

  /* Larger text areas */
  .rirekisho textarea,
  .rirekisho input {
    border: 0.2mm dotted #555 !important;
    background: transparent !important;
    overflow: hidden !important;
    padding: 1.5mm !important;
    line-height: 1.3 !important;
  }

  /* Spacious form sections */
  .rirekisho .cell textarea {
    min-height: 25mm !important;
    height: auto !important;
  }

  /* Better padding */
  .rirekisho section[class*="px-[8mm]"] {
    padding-left: 6mm !important;
    padding-right: 6mm !important;
  }

  .rirekisho section[class*="pt-[6mm]"] {
    padding-top: 4mm !important;
  }

  .rirekisho section[class*="pb-[6mm]"] {
    padding-bottom: 4mm !important;
  }

  /* Prevent page breaks inside elements */
  .rirekisho tbody tr,
  .avoid-break {
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }

  /* Fix text areas and inputs in print */
  .rirekisho textarea,
  .rirekisho input {
    border: 0.2mm dotted #555 !important;
    background: transparent !important;
    overflow: hidden !important;
  }

  /* Allow sections to flow to next page */
  .rirekisho section {
    overflow: visible !important;
  }

  /* Larger content font */
  .rirekisho {
    font-size: 11pt !important;
  }

  /* Optimize spacing for export */
  .print-layout .a4 {
    padding: 6mm 8mm !important;
  }

  /* Ensure photo doesn't interfere */
  .print-layout .photo-slot {
    position: fixed !important;
    right: 8mm !important;
    top: 4mm !important;
    width: 30mm !important;
    height: 40mm !important;
    z-index: 10 !important;
  }

  /* Content padding to avoid photo overlap */
  .print-layout .rirekisho div[class*="pr-[34mm]"] {
    padding-right: 34mm !important;
  }
}

/* Simple form UI (plain CSS to avoid build tool warnings) */
.input {
  border: 1px solid #e5e7eb;
  border-radius: 0.375rem;
  padding: 0.25rem 0.5rem;
  width: 100%;
}

.btn {
  border: 1px solid #cbd5e1;
  /* stronger contrast */
  border-radius: 0.375rem;
  padding: 0.375rem 0.875rem;
  /* slightly larger for readability */
  background: #ffffff;
  color: #0f172a;
  /* slate-900 */
  font-weight: 600;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
  cursor: pointer;
}

.btn:hover {
  background: #f8fafc;
  /* slate-50 */
}

.btn:focus {
  outline: 2px solid #93c5fd;
  /* light ring */
  outline-offset: 2px;
}

.btn[disabled] {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-primary {
  border-radius: 0.375rem;
  padding: 0.25rem 0.75rem;
  background: #2563eb;
  color: #fff;
}

.btn-primary:hover {
  background: #1d4ed8;
}

/* Responsive Design for Edit Mode */
.responsive-edit {
  overflow-x: auto;
}

@media (max-width: 768px) {

  /* Mobile styles for edit mode only */
  .responsive-edit .rirekisho {
    font-size: 9pt;
  }

  .responsive-edit .a4 {
    width: 100%;
    min-width: 320px;
    min-height: auto;
    margin: 0;
    padding: 4mm !important;
    box-sizing: border-box;
  }

  .responsive-edit .r-title {
    font-size: 18pt;
    letter-spacing: 4px;
    text-align: center;
    margin-bottom: 4mm;
  }

  /* Date section mobile adjustments */
  .responsive-edit .items-start {
    align-items: center !important;
    text-align: center;
  }

  .responsive-edit div[class*="pr-["] {
    padding-right: 0 !important;
  }

  /* Make tables responsive */
  .responsive-edit .rirekisho table {
    font-size: 8pt;
  }

  .responsive-edit .rirekisho .cell {
    padding: 1mm;
    font-size: 8pt;
    white-space: normal;
    word-wrap: break-word;
  }

  .responsive-edit .cell-input {
    padding: 1mm;
    font-size: 8pt;
    min-height: 24px;
  }

  /* Photo section adjustments */
  .responsive-edit .photo-slot {
    position: relative !important;
    width: 60mm !important;
    height: 80mm !important;
    margin: 2mm auto !important;
    right: auto !important;
    top: auto !important;
  }

  /* Adjust photo container */
  .responsive-edit .rirekisho div[class*="pr-"] {
    padding-right: 0 !important;
  }

  /* Stack elements vertically on mobile */
  .responsive-edit .flex {
    flex-direction: column !important;
    gap: 2mm !important;
  }

  .responsive-edit .justify-between {
    justify-content: flex-start !important;
  }

  /* Date section specific fixes */
  .responsive-edit .r-header-compact {
    flex-direction: column !important;
    align-items: center !important;
    gap: 2mm !important;
    width: 100% !important;
    text-align: center !important;
  }

  .responsive-edit .r-header-compact .flex {
    flex-direction: row !important;
    align-items: center !important;
    justify-content: center !important;
  }

  .responsive-edit .r-header-compact span {
    font-size: 9pt !important;
  }

  .responsive-edit .r-header-compact input {
    width: 8mm !important;
    text-align: center !important;
  }

  /* Button adjustments */
  .responsive-edit .btn {
    width: 100%;
    margin-bottom: 2mm;
    padding: 2mm;
    font-size: 9pt;
  }

  /* Text areas */
  .responsive-edit textarea {
    min-height: 60px !important;
  }
}

@media (max-width: 480px) {

  /* Extra small mobile devices */
  .responsive-edit .a4 {
    padding: 2mm !important;
  }

  .responsive-edit .rirekisho {
    font-size: 8pt;
  }

  .responsive-edit .rirekisho .cell {
    padding: 0.5mm;
    font-size: 7pt;
  }

  .responsive-edit .cell-input {
    font-size: 7pt;
    min-height: 20px;
  }

  .responsive-edit .r-title {
    font-size: 16pt;
    letter-spacing: 2px;
  }
}

/* Print layout fixes */
.print-layout {
  position: relative;
}

.print-layout .rirekisho {
  position: relative;
  z-index: 1;
}

.print-layout .photo-slot {
  position: absolute;
  z-index: 10;
}

/* Better print handling */
@media print {
  .print-layout {
    position: relative;
    overflow: visible;
  }

  .print-layout .a4 {
    position: relative;
    overflow: hidden;
  }

  .print-layout .photo-slot {
    position: fixed !important;
    right: 8mm !important;
    top: 4mm !important;
    z-index: 10 !important;
  }
}